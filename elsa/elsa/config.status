#!/bin/sh
# config.status

# this file was created by ./configure

if [ "$1" = "-reconfigure" ]; then
  # re-issue the ./configure command
  exec ./configure 
fi

# report on configuration
./config.summary

echo "creating Makefile ..."

# overcome my chmod below
rm -f Makefile

cat >Makefile <<EOF
# Makefile for smbase
# NOTE: generated by ./configure, do not edit

EOF

# variable substitution
sed -e "s|@CCFLAGS@|-g -Wall -Wno-deprecated -D__UNIX__ -O2 -DNDEBUG -D__LINUX__|g" \
    -e "s|@CFLAGS@|-g -Wall -D__UNIX__ -O2 -DNDEBUG -D__LINUX__|g" \
    -e "s|@CC@|gcc|g" \
    -e "s|@CXX@|g++|g" \
    -e "s|@CROSSTARGET@|0|g" \
    -e "s|@EXE@||g" \
    -e "s|@SMBASE@|../smbase|g" \
-e "s|@LDFLAGS@|-g -Wall|g" \
-e "s|@SMBASE@|../smbase|g" \
-e "s|@AST@|../ast|g" \
-e "s|@ELKHOUND@|../elkhound|g" \
-e "s|@PERL@|perl|g" \
-e "s|@USE_GNU@|1|g" \
-e "s|@USE_KANDR@|1|g" \
-e "s|@GCOV_MODS@||g" \
  <Makefile.in >>Makefile

# discourage editing ..
chmod a-w Makefile


